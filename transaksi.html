<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Form Order</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css" rel="stylesheet">
  <style>
    body {
      background-color: #121212;
      color: #fff;
      font-family: Arial, sans-serif;
      padding: 40px;
    }
    .card {
      background-color: #1e1e1e;
      border: none;
      color: #fff;
      border-radius: 15px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    }
    .card-header {
      background: #0d6efd;
      color: white;
      font-weight: bold;
      border-radius: 15px 15px 0 0;
    }
    .btn-whatsapp {
      background: #25D366;
      color: white;
      font-weight: bold;
    }
    .btn-whatsapp:hover {
      background: #1ebe5b;
      color: white;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-md-6">
        <div class="card">
          <div class="card-header text-center">
            <i class="bi bi-cart4"></i> Form Order Transaksi
          </div>
          <div class="card-body">
            <form id="orderForm">
              <div class="mb-3">
                <label class="form-label">Nama Produk</label>
                <input type="text" id="produk" class="form-control" placeholder="Contoh: Diamond Free Fire" required>
              </div>
              <div class="mb-3">
                <label class="form-label">Nominal</label>
                <input type="number" id="nominal" class="form-control" placeholder="Contoh: 100000" required>
              </div>
              <div class="mb-3">
                <label class="form-label">Metode Pembayaran</label>
                <input type="text" id="metode" class="form-control" placeholder="Contoh: DANA, OVO, GOPAY" required>
              </div>
              <div class="mb-3">
                <label class="form-label">ID/Email Tujuan</label>
                <input type="text" id="userid" class="form-control" placeholder="Contoh: user123@gmail.com" required>
              </div>
              <div class="mb-3">
                <label class="form-label">No WhatsApp Pembeli</label>
                <input type="tel" id="wa" class="form-control" placeholder="Contoh: 6281234567890" required>
              </div>
              <div class="mb-3">
                <label class="form-label">Catatan</label>
                <textarea id="catatan" class="form-control" placeholder="Tambahkan catatan jika perlu"></textarea>
              </div>
              <div class="mb-3">
                <label class="form-label">Upload Bukti Transfer</label>
                <input type="file" id="bukti" class="form-control" accept="image/*" required>
              </div>
              <div class="d-grid">
                <button type="submit" class="btn btn-whatsapp">
                  <i class="bi bi-whatsapp"></i> Kirim via WhatsApp
                </button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    const API_KEY = "ae8b3a7f9d4bfee3cb01319f99dc1c33"; 
    const ADMIN_WA = "6289636304329"; 

    document.getElementById("orderForm").addEventListener("submit", async function(e) {
      e.preventDefault();

      let file = document.getElementById("bukti").files[0];
      if (!file) {
        alert("Harap upload bukti transfer!");
        return;
      }

      let reader = new FileReader();
      reader.onloadend = async function () {
        let base64 = reader.result.replace(/^data:.+;base64,/, "");
        let formData = new FormData();
        formData.append("image", base64);

        let res = await fetch("https://api.imgbb.com/1/upload?key=" + API_KEY, {
          method: "POST",
          body: formData
        });
        let data = await res.json();

        if (data.success) {
          let linkGambar = data.data.url;
          let produk = document.getElementById("produk").value;
          let nominal = document.getElementById("nominal").value;
          let metode = document.getElementById("metode").value;
          let userid = document.getElementById("userid").value;
          let wa = document.getElementById("wa").value;
          let catatan = document.getElementById("catatan").value;

          let pesan = `Halo Admin, saya mau order:%0A- Produk: ${produk}%0A- Nominal: ${nominal}%0A- Metode: ${metode}%0A- UserID: ${userid}%0A- No WA: ${wa}%0A- Catatan: ${catatan}%0A- Bukti Transfer: ${linkGambar}`;

          window.open(`https://wa.me/${ADMIN_WA}?text=${pesan}`, "_blank");
        } else {
          alert("Upload gambar gagal, coba lagi.");
        }
      };
      reader.readAsDataURL(file);
    });
  </script>
</body>
</html>